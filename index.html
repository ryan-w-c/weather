<!DOCTYPE html>
<html lang="en">

<head>
  <title>Weather App</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" rel="stylesheet" />
  <style>
    body {
      overflow: hidden;
      font-family: Open Sans, sans-serif;
      color: white;
      margin: 28px;
    }

    .rain {
      width: 100vw;
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
      z-index: -1;
    }

    #vantaCanvas {
      width: 100vw;
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
      z-index: -1;
    }

    #container {
      display: flex;
      height: 100vh;
      z-index: 1;
    }

    #leftPanel {
      flex-grow: 1;
    }

    #rightPanel {
      width: 50vw;
      max-width: 500px;
      min-width: 300px;
    }

    .glass {
      border-radius: 10px;
      background: rgba(0, 81, 105, 0.45);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
    }

    #leftHeader {
      display: flex;
      flex-direction: column;
      margin-bottom: 10px;
    }

    #leftBody {
      display: flex;
      flex-direction: column;
      float: left;
      padding-left: 14px;
      padding-right: 14px;
    }

    #leftBody hr {
      margin: 0px;
    }

    #rightHeader {
      flex-direction: column;
      align-items: end;
      display: flex;
      margin-bottom: 21px;
    }

    #rightBody {
      height: min(100vh - 184px, 100%);
      overflow: auto;
    }

    #rightScroll {
      overflow-y: scroll;
      margin-bottom: 40px;
    }

    div.scrollmenu {
      overflow: auto;
      white-space: nowrap;
    }

    div.scrollmenu .hourlyForecast {
      display: inline-block;
      text-align: center;
      text-decoration: none;
      padding-left: 14px;
      padding-right: 14px;
    }

    h1 {
      font-size: 60px;
      padding-left: 10px;
      padding-right: 10px;
      margin: 0px;
    }

    #leftHeader h2 {
      padding-top: 0px;
      margin: 0px;
      margin-bottom: 10px;
    }

    #rightHeader h2 {
      padding-top: 0px;
      padding-right: 10px;
    }

    h2 {
      padding-top: 14px;
      padding-left: 14px;
      font-size: large;
    }

    h3 {
      font-size: medium;
    }

    .dailyForecast {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 10px;
      align-items: center;
      resize: horizontal;
      padding-left: 14px;
      padding-right: 14px;
    }

    hr {
      border: 0;
      height: 1px;
      background: rgba(255, 255, 255, 0.2);
      margin-left: 14px;
      margin-right: 14px;
    }

    button {
      box-shadow: none;
      background: transparent;
      transform-style: preserve-3d;
      padding: 0;
      height: auto;
      border: none;
      float: none;
    }

    button span {
      background: rgba(0, 81, 105, 0.45);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      /* font-size: 2rem; */
      padding: 14px;
      border: none;
      /* line-height: 3rem; */
      will-change: transform, filter;
      float: none;
      margin: 0;
      transition: all 0.15s ease-out;
      height: auto;
      border-radius: 100px;
      overflow: hidden;
      display: block;
      margin: 0px auto;
      display: block;
      transform: rotateX(0deg) rotateY(0deg) scale(1);
      filter: drop-shadow(0 15px 15px rgba(0, 0, 0, 0.3));
      font-weight: 600;
      perspective-origin: 0 0;
      letter-spacing: 0;
    }

    .button {
      transition: transform 0.3s ease-in-out;
    }

    .input {
      font-size: 30px;
      width: 0;
      opacity: 0;
      overflow: hidden;
      transition: width 0.5s ease-in-out, opacity 0.5s ease-in-out;
      background: none;
      border: none;
      border-bottom: 2px solid white;
      color: white;
    }

    .input:focus {
      outline: none;
    }

    .input.show {
      width: 90%;
      opacity: 1;
    }

    .input.hide {
      width: 0;
      opacity: 0;
    }

    .hidden {
      display: none;
      opacity: 0;
    }

    #cityName {
      opacity: 0;
      transform: translateX(-50px);
      transition: transform 0.5s ease-in-out, opacity 0.5s ease-in-out;
    }

    #cityName.visible {
      opacity: 1;
      transform: translateX(0);
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
</head>

<body>

  <div id="container">
    <div class="header" id="leftPanel">
      <div class="header" id="leftHeader">
        <div style="display: flex; align-items: center;">
          <h1 style="margin-bottom: 10px;">73°</h1>
          <img src="img/PartlyCloudy.png" alt="nightPartlyCloudy" style="padding-left:20px; width: 40px; height: 40px;">
        </div>
        <h2>Partly Cloudy</h2>
        <h2>High: 77 Low: 56</h2>
      </div>
      <div class="glass" id="leftBody">
        <div style="display: grid; grid-template-columns: 1fr auto;gap: 70px;">
          <h3>Feels like</h3>
          <h3>73°</h3>
        </div>
        <hr>
        <div style="display: grid; grid-template-columns: 1fr auto">
          <h3>Sunset</h3>
          <h3>8:16pm</h3>
        </div>
        <hr>
        <div style="display: grid; grid-template-columns: 1fr auto">
          <h3>Wind</h3>
          <h3>5mph</h3>
        </div>
        <hr>
        <div style="display: grid; grid-template-columns: 1fr auto">
          <h3>Humidity</h3>
          <h3>40%</h3>
        </div>
        <hr>
        <div style="display: grid; grid-template-columns: 1fr auto">
          <h3>UV</h3>
          <h3>3</h3>
        </div>
      </div>
    </div>
    <div id="rightPanel">
      <div class="header" id="rightHeader">
        <div style="display: flex; align-items: center; justify-content: flex-end; margin-top: 30px;">
          <h1 id="cityName"
            style="font-size: 30px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 40vw; max-width: 700px; text-align: right;">
            Seattle, WA
          </h1>
          <button class="button" onclick="buttonPress()" style="margin-left: 10px;">
            <span>
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="30px" fill="#ffff">
                <path
                  d="M782-82 523-341q-29 20-67.5 32T372-297q-118 0-200.5-82.5T89-580q0-118 82.5-200.5T372-863q118 0 200.5 82.5T655-580q0 46-12 83.5T611-431l260 261-89 88ZM372-423q66 0 111.5-45.5T529-580q0-66-45.5-111.5T372-737q-66 0-111.5 45.5T215-580q0 66 45.5 111.5T372-423Z" />
              </svg>
            </span>
          </button>
          <input type="text" class="input" placeholder="Enter city" style="margin-left: 10px;">
        </div>
        <h2>Monday, 12:13pm PST</h2>
      </div>
      <div id="rightBody">
        <div id="rightScroll">
          <div class="glass" id="hourlyForecast">
            <h2>Hourly Forecast</h2>
            <div class="scrollmenu">
              <div class="hourlyForecast">
                <h3>12pm</h3>
                <img src="img/PartlyCloudy.png" alt="nightPartlyCloudy" style="width: 40px; height: 40px;">
                <h3>73°</h3>
              </div>
              <div class="hourlyForecast">
                <h3>1PM</h3>
                <img src="img/RainThunder.png" alt="nightPartlyCloudy" style="width: 40px; height: 40px;">
                <h3>73°</h3>
              </div>
              <div class="hourlyForecast">
                <h3>2PM</h3>
                <img src="img/Rainy.png" alt="nightPartlyCloudy" style="width: 40px; height: 40px;">
                <h3>73°</h3>
              </div>
              <div class="hourlyForecast">
                <h3>3PM</h3>
                <img src="img/Cloudy.png" alt="nightPartlyCloudy" style="width: 40px; height: 40px;">
                <h3>73°</h3>
              </div>
              <div class="hourlyForecast">
                <h3>4PM</h3>
                <img src="img/Snowy.png" alt="nightPartlyCloudy" style="width: 40px; height: 40px;">
                <h3>73°</h3>
              </div>
              <div class="hourlyForecast">
                <h3>5PM</h3>
                <img src="img/Sunny.png" alt="nightPartlyCloudy" style="width: 40px; height: 40px;">
                <h3>73°</h3>
              </div>
              <div class="hourlyForecast">
                <h3>6PM</h3>
                <img src="img/nightClear.png" alt="nightPartlyCloudy" style="width: 40px; height: 40px;">
                <h3>73°</h3>
              </div>
              <div class="hourlyForecast">
                <h3>7PM</h3>
                <img src="img/nightPartlyCloudy.png" alt="nightPartlyCloudy" style="width: 40px; height: 40px;">
                <h3>73°</h3>
              </div>
              <div class="hourlyForecast">
                <h3>8PM</h3>
                <img src="img/mist.png" alt="nightPartlyCloudy" style="width: 40px; height: 40px;">
                <h3>73°</h3>
              </div>
            </div>
          </div>
          <div class="glass" id="dailyForecast">
            <h2>Daily Forecast</h2>
            <hr>
            <div class="dailyForecast">
              <h3 style="justify-self: start;">Today</h3>
              <img src="img/Sunny.png" alt="nightPartlyCloudy" style="width: 40px; height: 40px; justify-self: center;">
              <h3 style="justify-self: end;">61° - 73°</h3>
            </div>
            <hr>
            <div class="dailyForecast">
              <h3 style="justify-self: start;">8 / 19</h3>
              <img src="img/Snowy.png" alt="nightPartlyCloudy" style="width: 40px; height: 40px; justify-self: center;">
              <h3 style="justify-self: end;">61° - 73°</h3>
            </div>
            <hr>
            <div class="dailyForecast">
              <h3 style="justify-self: start;">8 / 20</h3>
              <img src="img/nightPartlyCloudy.png" alt="nightPartlyCloudy"
                style="width: 40px; height: 40px; justify-self: center;">
              <h3 style="justify-self: end;">61° - 73°</h3>
            </div>
            <hr>
            <div class="dailyForecast">
              <h3 style="justify-self: start;">8 / 21</h3>
              <img src="img/nightClear.png" alt="nightPartlyCloudy"
                style="width: 40px; height: 40px; justify-self: center;">
              <h3 style="justify-self: end;">61° - 73°</h3>
            </div>
            <hr>
            <div class="dailyForecast">
              <h3 style="justify-self: start;">8 / 22</h3>
              <img src="img/Rainy.png" alt="nightPartlyCloudy" style="width: 40px; height: 40px; justify-self: center;">
              <h3 style="justify-self: end;">61° - 73°</h3>
            </div>
            <hr>
            <div class="dailyForecast">
              <h3 style="justify-self: start;">8 / 23</h3>
              <img src="img/RainThunder.png" alt="nightPartlyCloudy"
                style="width: 40px; height: 40px; justify-self: center;">
              <h3 style="justify-self: end;">61° - 73°</h3>
            </div>
            <hr>
            <div class="dailyForecast">
              <h3 style="justify-self: start;">8 / 24</h3>
              <img src="img/PartlyCloudy.png" alt="nightPartlyCloudy"
                style="width: 40px; height: 40px; justify-self: center;">
              <h3 style="justify-self: end;">61° - 73°</h3>
            </div>
            <hr>
            <div class="dailyForecast">
              <h3 style="justify-self: start;">8 / 25</h3>
              <img src="img/Cloudy.png" alt="nightPartlyCloudy"
                style="width: 40px; height: 40px; justify-self: center;">
              <h3 style="justify-self: end;">61° - 73°</h3>
            </div>
            <hr>
            <div class="dailyForecast">
              <h3 style="justify-self: start;">8 / 26</h3>
              <img src="img/mist.png" alt="nightPartlyCloudy" style="width: 40px; height: 40px; justify-self: center;">
              <h3 style="justify-self: end;">61° - 73°</h3>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="vantaCanvas"></div>

  <script>

    function buttonPress() {
      const button = document.querySelector('.button');
      const inputField = document.querySelector('.input');
      const h1Element = document.getElementById('cityName');

      const buttonAnimationDuration = 400;

      button.classList.toggle('move-left');

      if (inputField.classList.contains('show')) {
        inputField.classList.remove('show');
        inputField.classList.add('hide');

        setTimeout(() => {
          h1Element.classList.remove('hidden');
          void h1Element.offsetWidth;
          h1Element.classList.add('visible');
        }, buttonAnimationDuration);

      } else {
        h1Element.classList.remove('visible');
        h1Element.classList.add('hidden');
        inputField.classList.remove('hide');
        inputField.classList.add('show');
        inputField.focus();
      }
    }
    document.getElementById('cityName').classList.add('visible');

    let calculateAngle = function (e, item, parent) {
      let dropShadowColor = `rgba(0, 0, 0, 0.3)`
      if (parent.getAttribute('data-filter-color') !== null) {
        dropShadowColor = parent.getAttribute('data-filter-color');
      }

      if (parent.getAttribute('data-custom-perspective') !== null) {
        parent.style.perspective = `${parent.getAttribute('data-custom-perspective')}`
      }

      let x = Math.abs(item.getBoundingClientRect().x - e.clientX);
      let y = Math.abs(item.getBoundingClientRect().y - e.clientY);

      let halfWidth = item.getBoundingClientRect().width / 2;
      let halfHeight = item.getBoundingClientRect().height / 2;

      let calcAngleX = (x - halfWidth) / 6;
      let calcAngleY = (y - halfHeight) / 4;

      item.style.transform = `rotateY(${calcAngleX}deg) rotateX(${calcAngleY}deg) scale(1.15)`;

      parent.style.perspective = `${halfWidth * 2}px`
      item.style.perspective = `${halfWidth * 3}px`

      let calcShadowX = (x - halfWidth) / 3;
      let calcShadowY = (y - halfHeight) / 3;

      item.style.filter = `drop-shadow(${-calcShadowX}px ${calcShadowY}px 15px ${dropShadowColor})`;
    }


    document.querySelectorAll('.button').forEach(function (item) {
      item.addEventListener('mouseenter', function (e) {
        calculateAngle(e, this.querySelector('span'), this);
      });
      item.addEventListener('mousemove', function (e) {
        calculateAngle(e, this.querySelector('span'), this);
      });

      item.addEventListener('mouseleave', function (e) {
        let dropShadowColor = `rgba(0, 0, 0, 0.3)`
        if (item.getAttribute('data-filter-color') !== null) {
          dropShadowColor = item.getAttribute('data-filter-color')
        }
        item.querySelector('span').style.transform = `rotateY(0deg) rotateX(0deg) scale(1)`;
        item.querySelector('span').style.filter = `drop-shadow(0 10px 15px ${dropShadowColor})`;
      });
    })


    let script = document.createElement('script');
    script.src = `functions/nightclear.js`;
    document.body.appendChild(script);

  </script>
</body>

</html>